<div class="mt-4">
    <h4 class="mb-3">Comments</h4>
    <div id="comments-section">
        {% if post.comments.exists %}
            {% for comment in post.comments.all %}
                <div class="comment p-3 mb-3" id="comment-{{ comment.id }}"
                     style="border: 1px solid #e3e3e3; border-radius: 10px; background-color: #f9f9f9;">
                    <h5 class="mb-1">
                        <a href="/profile/{{ comment.user }}"
                           style="text-decoration: none; font-weight: bold;">
                            @{{ comment.user}}
                        </a>
                    </h5>
                    <!-- Comment content container -->
                    <div class="comment-content-container">
                        <p class="mb-2 comment-text" style="margin-left: 15px;">{{ comment.content|safe }}</p>
                        <!-- Edit form (hidden by default) -->
                        <div class="edit-form" style="display: none;">
                            <textarea class="form-control mb-2">{{ comment.content }}</textarea>
                            <button class="btn btn-primary btn-sm save-edit">Save</button>
                            <button class="btn btn-secondary btn-sm cancel-edit">Cancel</button>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <small class="text-muted">{{ comment.created_at|date:"Y-m-d H:i" }}</small>
                    </div>
                    
                    {% if user.username == comment.user %} 
                    <button class="btn btn-primary edit-comment">Edit</button>
                    <a href="/comment/delete/{{ comment.id }}" class="btn btn-danger" 
                       onclick="return confirm('Are you sure you want to delete this comment?');">Delete</a>                                            
                    {% endif %}
                </div>
            {% empty %}
                <p>No comments yet.</p>
            {% endfor %}
        {% endif %}
    </div>
</div>